[2025-11-15T20:37:17.386Z] ğŸš€ generateRecommendations started 
[2025-11-15T20:37:17.386Z] ğŸ“¥ Input movie slugs: [
  "beau-is-afraid"
]
[2025-11-15T20:37:17.386Z] INFO: ğŸ”§ Initializing recommendation algorithm variables 
[2025-11-15T20:37:17.386Z] INFO: ğŸ‘ Getting movie like counts 
[2025-11-15T20:37:17.387Z] DEBUG: ğŸ” Querying likes - batch 1 
[2025-11-15T20:37:17.391Z] ğŸš€ generateRecommendations started 
[2025-11-15T20:37:17.391Z] ğŸ“¥ Input movie slugs: [
  "beau-is-afraid"
]
[2025-11-15T20:37:17.391Z] INFO: ğŸ”§ Initializing recommendation algorithm variables 
[2025-11-15T20:37:17.391Z] INFO: ğŸ‘ Getting movie like counts 
[2025-11-15T20:37:17.391Z] DEBUG: ğŸ” Querying likes - batch 1 
[2025-11-15T20:37:18.216Z] DEBUG: ğŸ” Querying likes - batch 2 
[2025-11-15T20:37:18.407Z] DEBUG: ğŸ” Querying likes - batch 2 
[2025-11-15T20:37:18.816Z] DEBUG: ğŸ” Querying likes - batch 3 
[2025-11-15T20:37:18.881Z] DEBUG: ğŸ” Querying likes - batch 3 
[2025-11-15T20:37:19.415Z] DEBUG: ğŸ” Querying likes - batch 4 
[2025-11-15T20:37:19.481Z] DEBUG: ğŸ” Querying likes - batch 4 
[2025-11-15T20:37:20.139Z] DEBUG: ğŸ” Querying likes - batch 5 
[2025-11-15T20:37:20.316Z] DEBUG: ğŸ” Querying likes - batch 5 
[2025-11-15T20:37:20.709Z] DEBUG: ğŸ” Querying likes - batch 6 
[2025-11-15T20:37:21.038Z] DEBUG: ğŸ” Querying likes - batch 6 
[2025-11-15T20:37:21.334Z] DEBUG: ğŸ” Querying likes - batch 7 
[2025-11-15T20:37:21.800Z] DEBUG: ğŸ” Querying likes - batch 7 
[2025-11-15T20:37:21.959Z] DEBUG: ğŸ” Querying likes - batch 8 
[2025-11-15T20:37:22.496Z] DEBUG: ğŸ” Querying likes - batch 9 
[2025-11-15T20:37:22.662Z] DEBUG: ğŸ” Querying likes - batch 8 
[2025-11-15T20:37:23.091Z] DEBUG: ğŸ” Querying likes - batch 10 
[2025-11-15T20:37:23.429Z] DEBUG: ğŸ” Querying likes - batch 9 
[2025-11-15T20:37:23.521Z] INFO: ğŸ” Progress: 175229 items from likes so far... 
[2025-11-15T20:37:23.521Z] DEBUG: ğŸ” Querying likes - batch 11 
[2025-11-15T20:37:24.118Z] DEBUG: ğŸ” Querying likes - batch 10 
[2025-11-15T20:37:24.342Z] DEBUG: ğŸ” Querying likes - batch 12 
[2025-11-15T20:37:24.895Z] INFO: ğŸ” Progress: 175229 items from likes so far... 
[2025-11-15T20:37:24.895Z] DEBUG: ğŸ” Querying likes - batch 11 
[2025-11-15T20:37:25.061Z] DEBUG: ğŸ” Querying likes - batch 13 
[2025-11-15T20:37:25.618Z] DEBUG: ğŸ” Querying likes - batch 12 
[2025-11-15T20:37:25.860Z] DEBUG: ğŸ” Querying likes - batch 14 
[2025-11-15T20:37:26.467Z] DEBUG: ğŸ” Querying likes - batch 13 
[2025-11-15T20:37:26.645Z] DEBUG: ğŸ” Querying likes - batch 15 
[2025-11-15T20:37:27.199Z] DEBUG: ğŸ” Querying likes - batch 14 
[2025-11-15T20:37:27.447Z] DEBUG: ğŸ” Querying likes - batch 16 
[2025-11-15T20:37:27.761Z] INFO: ğŸ” Retrieved 268857 total items from likes in 16 batches 
[2025-11-15T20:37:27.761Z] INFO: ğŸ‘ Processing 268857 like records 
[2025-11-15T20:37:27.822Z] INFO: ğŸ‘ Generated like counts for 5000 movies 
[2025-11-15T20:37:27.824Z] INFO: ğŸ‘ Top 5 most liked movies: [
  [
    "parasite-2019",
    1117
  ],
  [
    "spider-man-into-the-spider-verse",
    945
  ],
  [
    "whiplash-2014",
    899
  ],
  [
    "interstellar",
    805
  ],
  [
    "portrait-of-a-lady-on-fire",
    787
  ]
]
[2025-11-15T20:37:27.824Z] INFO: movieLikeCounts=[object Map] 
[2025-11-15T20:37:27.824Z] INFO: ğŸ“Š Collecting input movie metadata 
[2025-11-15T20:37:27.824Z] INFO: ğŸ“Š Processing input movie: beau-is-afraid 
[2025-11-15T20:37:27.824Z] DEBUG: ğŸ“‹ Getting movie details for: beau-is-afraid
[2025-11-15T20:37:27.990Z] ERROR: âŒ Error in generateRecommendations: {
  "name": "ValidationException",
  "$fault": "client",
  "$metadata": {
    "httpStatusCode": 400,
    "requestId": "GFH5A3O7K4TKA2E5EPMRUR009BVV4KQNSO5AEMVJF66Q9ASUAAJG",
    "attempts": 1,
    "totalRetryDelay": 0
  },
  "__type": "com.amazon.coral.validate#ValidationException",
  "message": "The provided key element does not match the schema"
}
[2025-11-15T20:37:28.047Z] ERROR: âŒ Error stack: ValidationException: The provided key element does not match the schema
    at throwDefaultError (webpack-internal:///(rsc)/./node_modules/@smithy/smithy-client/dist-es/default-error-handler.js:11:22)
    at eval (webpack-internal:///(rsc)/./node_modules/@smithy/smithy-client/dist-es/default-error-handler.js:20:9)
    at de_CommandError (webpack-internal:///(rsc)/./node_modules/@aws-sdk/client-dynamodb/dist-es/protocols/Aws_json1_0.js:1319:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async eval (webpack-internal:///(rsc)/./node_modules/@smithy/middleware-serde/dist-es/deserializerMiddleware.js:8:24)
    at async eval (webpack-internal:///(rsc)/./node_modules/@aws-sdk/lib-dynamodb/dist-es/baseCommand/DynamoDBDocumentClientCommand.js:27:34)
    at async eval (webpack-internal:///(rsc)/./node_modules/@smithy/core/dist-es/middleware-http-signing/httpSigningMiddleware.js:25:20)
    at async eval (webpack-internal:///(rsc)/./node_modules/@smithy/middleware-retry/dist-es/retryMiddleware.js:41:46)
    at async eval (webpack-internal:///(rsc)/./node_modules/@aws-sdk/middleware-logger/dist-es/loggerMiddleware.js:9:26)
    at async getMovie (webpack-internal:///(rsc)/./src/app/api/lib/dynamodb.js:144:24)
    at async getMovieDetails (webpack-internal:///(rsc)/./src/app/api/getSuggestedMovies/route.js:109:27)
    at async generateRecommendations (webpack-internal:///(rsc)/./src/app/api/getSuggestedMovies/route.js:149:29)
    at async POST (webpack-internal:///(rsc)/./src/app/api/getSuggestedMovies/route.js:453:33)
    at async AppRouteRouteModule.do (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:26:33891)
    at async AppRouteRouteModule.handle (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:26:41254)
    at async doRender (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/base-server.js:1513:42)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/base-server.js:1915:28)
    at async DevServer.renderPageComponent (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/base-server.js:2393:24)
    at async DevServer.renderToResponseImpl (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/base-server.js:2430:32)
    at async DevServer.pipeImpl (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/base-server.js:1003:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/next-server.js:304:17)
    at async DevServer.handleRequestImpl (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/base-server.js:895:17)
    at async /Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/dev/next-dev-server.js:371:20
    at async Span.traceAsyncFn (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/trace/trace.js:157:20)
    at async DevServer.handleRequest (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/dev/next-dev-server.js:368:24)
    at async invokeRender (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/lib/router-server.js:235:21)
    at async handleRequest (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/lib/router-server.js:426:24)
    at async requestHandlerImpl (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/lib/router-server.js:450:13)
    at async Server.requestListener (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/lib/start-server.js:158:13)
[2025-11-15T20:37:28.297Z] DEBUG: ğŸ” Querying likes - batch 15 
[2025-11-15T20:37:29.052Z] DEBUG: ğŸ” Querying likes - batch 16 
[2025-11-15T20:37:29.432Z] INFO: ğŸ” Retrieved 268857 total items from likes in 16 batches 
[2025-11-15T20:37:29.432Z] INFO: ğŸ‘ Processing 268857 like records 
[2025-11-15T20:37:29.500Z] INFO: ğŸ‘ Generated like counts for 5000 movies 
[2025-11-15T20:37:29.501Z] INFO: ğŸ‘ Top 5 most liked movies: [
  [
    "parasite-2019",
    1117
  ],
  [
    "spider-man-into-the-spider-verse",
    945
  ],
  [
    "whiplash-2014",
    899
  ],
  [
    "interstellar",
    805
  ],
  [
    "portrait-of-a-lady-on-fire",
    787
  ]
]
[2025-11-15T20:37:29.501Z] INFO: movieLikeCounts=[object Map] 
[2025-11-15T20:37:29.501Z] INFO: ğŸ“Š Collecting input movie metadata 
[2025-11-15T20:37:29.502Z] INFO: ğŸ“Š Processing input movie: beau-is-afraid 
[2025-11-15T20:37:29.502Z] DEBUG: ğŸ“‹ Getting movie details for: beau-is-afraid
[2025-11-15T20:37:29.635Z] ERROR: âŒ Error in generateRecommendations: {
  "name": "ValidationException",
  "$fault": "client",
  "$metadata": {
    "httpStatusCode": 400,
    "requestId": "96EOKSKPL6FLS0IC1019UR30QBVV4KQNSO5AEMVJF66Q9ASUAAJG",
    "attempts": 1,
    "totalRetryDelay": 0
  },
  "__type": "com.amazon.coral.validate#ValidationException",
  "message": "The provided key element does not match the schema"
}
[2025-11-15T20:37:29.700Z] ERROR: âŒ Error stack: ValidationException: The provided key element does not match the schema
    at throwDefaultError (webpack-internal:///(rsc)/./node_modules/@smithy/smithy-client/dist-es/default-error-handler.js:11:22)
    at eval (webpack-internal:///(rsc)/./node_modules/@smithy/smithy-client/dist-es/default-error-handler.js:20:9)
    at de_CommandError (webpack-internal:///(rsc)/./node_modules/@aws-sdk/client-dynamodb/dist-es/protocols/Aws_json1_0.js:1319:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async eval (webpack-internal:///(rsc)/./node_modules/@smithy/middleware-serde/dist-es/deserializerMiddleware.js:8:24)
    at async eval (webpack-internal:///(rsc)/./node_modules/@aws-sdk/lib-dynamodb/dist-es/baseCommand/DynamoDBDocumentClientCommand.js:27:34)
    at async eval (webpack-internal:///(rsc)/./node_modules/@smithy/core/dist-es/middleware-http-signing/httpSigningMiddleware.js:25:20)
    at async eval (webpack-internal:///(rsc)/./node_modules/@smithy/middleware-retry/dist-es/retryMiddleware.js:41:46)
    at async eval (webpack-internal:///(rsc)/./node_modules/@aws-sdk/middleware-logger/dist-es/loggerMiddleware.js:9:26)
    at async getMovie (webpack-internal:///(rsc)/./src/app/api/lib/dynamodb.js:144:24)
    at async getMovieDetails (webpack-internal:///(rsc)/./src/app/api/getSuggestedMovies/route.js:109:27)
    at async generateRecommendations (webpack-internal:///(rsc)/./src/app/api/getSuggestedMovies/route.js:149:29)
    at async POST (webpack-internal:///(rsc)/./src/app/api/getSuggestedMovies/route.js:453:33)
    at async AppRouteRouteModule.do (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:26:33891)
    at async AppRouteRouteModule.handle (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:26:41254)
    at async doRender (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/base-server.js:1513:42)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/base-server.js:1915:28)
    at async DevServer.renderPageComponent (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/base-server.js:2393:24)
    at async DevServer.renderToResponseImpl (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/base-server.js:2430:32)
    at async DevServer.pipeImpl (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/base-server.js:1003:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/next-server.js:304:17)
    at async DevServer.handleRequestImpl (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/base-server.js:895:17)
    at async /Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/dev/next-dev-server.js:371:20
    at async Span.traceAsyncFn (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/trace/trace.js:157:20)
    at async DevServer.handleRequest (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/dev/next-dev-server.js:368:24)
    at async invokeRender (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/lib/router-server.js:235:21)
    at async handleRequest (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/lib/router-server.js:426:24)
    at async requestHandlerImpl (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/lib/router-server.js:450:13)
    at async Server.requestListener (/Users/jakelawrence/Desktop/FILES/Code/what-do-i-watch/node_modules/next/dist/server/lib/start-server.js:158:13)
